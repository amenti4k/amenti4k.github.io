---
layout: post
title: My Spotify Top Songs
---

## My Top Spotify Songs

<p>Click the button below to view your top Spotify songs for this year!</p>

<button id="loginButton">Login with Spotify</button>

<div id="topSongs"></div>

<script>
  document.getElementById('loginButton').addEventListener('click', function() {
    // Redirect to Spotify login
    var client_id = 'YOUR_SPOTIFY_CLIENT_ID';
    var redirect_uri = 'YOUR_REDIRECT_URI'; // Must be in the list of Redirect URIs for your Spotify App
    var scopes = 'user-top-read'; // Requesting permission to read user's top tracks
    var url = 'https://accounts.spotify.com/authorize?response_type=code&client_id=' + client_id + 
              '&scope=' + encodeURIComponent(scopes) + 
              '&redirect_uri=' + encodeURIComponent(redirect_uri);
    window.location = url;
  });

  // Check for Spotify authorization code in the URL
  var urlParams = new URLSearchParams(window.location.search);
  var code = urlParams.get('code');
  if (code) {
    // You have the authorization code, so you can now request the access token.
    // Since Jekyll is static, you'll need a server-side component to handle this securely.
    // The following fetch assumes you have a server-side endpoint that accepts the code and returns the access token.

    fetch('/path/to/your/server/endpoint', {
      method: 'POST',
      body: JSON.stringify({ code: code }),
    })
      .then(response => response.json())
      .then(data => {
        // Use the access token to fetch the top songs
        var accessToken = data.access_token;
        fetch('https://api.spotify.com/v1/me/top/tracks?time_range=medium_term', {
          headers: { 'Authorization': 'Bearer ' + accessToken },
        })
          .then(response => response.json())
          .then(data => {
            // Display the top songs
            var topSongsDiv = document.getElementById('topSongs');
            data.items.forEach(track => {
              topSongsDiv.innerHTML += '<p>' + track.name + ' by ' + track.artists[0].name + '</p>';
            });
          });
      });
  }
</script>
